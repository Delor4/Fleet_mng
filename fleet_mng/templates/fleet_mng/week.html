{# Wyświetlenie widoku tygodniowego #}
{% extends "fleet_mng/_base.html" %}
{% block content %}
{% if perms.fleet_mng.add_rent %}
<a href="{% url 'fleet_mng:rent_form' %}" id="newrentbt">Nowe wypożyczenie</a>
{% endif %}
<table class="table table-striped table-hover table-sm">
    <thead class="thead-light">
        <tr>
            <th scope="col">
                Vehicle
            </th>
            {% for d in days %}{%if forloop.counter0|divisibleby:7 %}<th colspan="7" scope="col">{{ d }}</th>{%endif%}
            {% endfor %}
        </tr>
        <tr>
            <th></th>
            {% for d in days %}
            <th>{{d.day}}</th>
            {% endfor %}
        </tr>
    </thead>
    {% for vehicle, d in rents_table.items %}
    <tr class="{%if vehicle.is_not_bring_back %}not_bring_back table-danger{%endif%}">
        <th scope="row" class="{%if vehicle.is_rented %}table-info{%endif%}">
            <div class="{%if vehicle.is_rented %}rented{%endif%}">
                {{vehicle}}
            </div>
        </th>
        {% for h in d %}
        <td class="{%ifequal h.present 1 %}rent_bar{% else %}no_rent_bar{% endifequal %}">
            {%ifequal h.present 1 %}
            <a href="{% url 'fleet_mng:rent' h.rent.id %}">+</a>
            {% else %}
            .
            {% endifequal %}
        </td>
        {% endfor %}
    </tr>
    {% endfor %}

</table>
<a href="{% url 'fleet_mng:week_date' nav.prev_week.year nav.prev_week.month nav.prev_week.day %}"><<</a>
<a href="{% url 'fleet_mng:week_date' nav.prev.year nav.prev.month nav.prev.day %}"><</a>
...
<a href="{% url 'fleet_mng:week_date' nav.next.year nav.next.month nav.next.day %}">></a>
<a href="{% url 'fleet_mng:week_date' nav.next_week.year nav.next_week.month nav.next_week.day %}">>></a>
{% endblock %}
